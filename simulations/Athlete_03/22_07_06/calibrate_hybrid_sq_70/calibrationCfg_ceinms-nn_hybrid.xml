<?xml version="1.0" encoding="utf-8"?>
<calibration>
   <optimiser>
      <debug>true</debug>
      <hybridCalibration>true</hybridCalibration>
      <learningRate>0.02</learningRate>
      <maxIterations>1000</maxIterations>
      <earlyStopping>
         <minImprovement>0.1</minImprovement>
         <patience>20</patience>
      </earlyStopping>
      <!-- <learningRateDecay>
         <decay>0.99</decay>
         <minLearningRate>0.0001</minLearningRate>
      </learningRateDecay> -->
      <numberOfSynergies>4</numberOfSynergies>
   </optimiser>
   <tendon>elastic</tendon>
   <calibrationTargets>
      <parametersToCalibrate>
         <parameter name="c1">-0.95 -0.05</parameter>
         <parameter name="c2">-0.95 -0.05</parameter>
         <parameter name="shapefactor">-2.999 -0.001</parameter>
         <parameter name="optimalFiberLength">0.95 1.05</parameter>
         <parameter name="tendonSlackLength">0.95 1.05</parameter>
         <parameter name="strengthCoefficient">0.5 3.5</parameter>
         <muscleGroups>
            <muscles>addbrev_r addlong_r addmagDist_r addmagIsch_r addmagMid_r addmagProx_r grac_r</muscles>
            <muscles>bflh_r semimem_r semiten_r</muscles>
            <muscles>bfsh_r</muscles>
            <muscles>glmax1_r glmax2_r glmax3_r</muscles>
            <muscles>glmed1_r glmed2_r glmed3_r</muscles>
            <muscles>glmin1_r glmin2_r glmin3_r</muscles>
            <muscles>sart_r recfem_r tfl_r</muscles>
            <muscles>iliacus_r psoas_r</muscles>
            <muscles>perbrev_r perlong_r tibant_r tibpost_r</muscles>
            <muscles>edl_r ehl_r fdl_r fhl_r</muscles>
            <muscles>soleus_r gaslat_r gasmed_r</muscles>
            <muscles>vasint_r vaslat_r vasmed_r</muscles>
            <muscles>addbrev_l addlong_l addmagDist_l addmagIsch_l addmagMid_l addmagProx_l grac_l</muscles>
            <muscles>bflh_l semimem_l semiten_l</muscles>
            <muscles>bfsh_l</muscles>
            <muscles>glmax1_l glmax2_l glmax3_l</muscles>
            <muscles>glmed1_l glmed2_l glmed3_l</muscles>
            <muscles>glmin1_l glmin2_l glmin3_l</muscles>
            <muscles>sart_l recfem_l tfl_l</muscles>
            <muscles>iliacus_l psoas_l</muscles>
            <muscles>perbrev_l perlong_l tibant_l tibpost_l</muscles>
            <muscles>edl_l ehl_l fdl_l fhl_l</muscles>
            <muscles>soleus_l gaslat_l gasmed_l</muscles>
            <muscles>vasint_l vaslat_l vasmed_l</muscles>
         </muscleGroups>
      </parametersToCalibrate>
      <objectiveFunctions>
         <objectiveFunction>
            <name>MomentError</name>
            <targets>all</targets>
            <weight>1</weight>
         </objectiveFunction>
         <objectiveFunction>
            <name>Penalty</name>
            <targetType>normalisedFibreLength</targetType>
            <weight>1000</weight>
            <exponent>2</exponent>
            <range>0.5 1.5</range>
         </objectiveFunction>
         <objectiveFunction>
            <name>Penalty</name>
            <targetType>tendonStrain</targetType>
            <weight>1000</weight>
            <exponent>2</exponent>
            <range>0. 0.5</range>
         </objectiveFunction>
         <objectiveFunction>
            <name>ExcitationsSquared</name>
            <weight>1</weight>
         </objectiveFunction>
         <objectiveFunction>
            <name>SynergyExtraction</name>
            <mseWeight>100</mseWeight>
            <range>0. 1.</range>
            <rangeExponent>2</rangeExponent>
            <rangeWeight>1000</rangeWeight>
         </objectiveFunction>
      </objectiveFunctions>
      <muscles>all</muscles>
   </calibrationTargets>
   <trialSet>..\sq_70_EMG\inputData.xml</trialSet>
</calibration>